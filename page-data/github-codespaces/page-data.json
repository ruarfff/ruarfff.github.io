{"componentChunkName":"component---src-templates-blog-post-js","path":"/github-codespaces/","result":{"data":{"site":{"siteMetadata":{"title":"Ruairí's Blog"}},"markdownRemark":{"id":"27bb0dd0-f3e5-5af0-80a2-4e2b2568e5a5","excerpt":"A while back I started using Devcontainer in VsCode. I really liked the editor integration and if you’re in a team, being able to share the development…","html":"<p>A while back I started using <a href=\"https://code.visualstudio.com/docs/remote/devcontainerjson-reference\">Devcontainer</a> in <a href=\"https://code.visualstudio.com\">VsCode</a>. I really liked the editor integration and if you’re in a team, being able to share the development environment like this is great. We have been able to do this for a while now with <a href=\"https://www.docker.com/\">docker</a> or even <a href=\"https://www.vagrantup.com\">vagrant</a> but getting a nice editor abstraction makes it easier to adopt.</p>\n<p>I recently got access to <a href=\"https://github.com/features/codespaces\">Codespaces</a> and discovered it also supports this setup.</p>\n<p>I am using it for <a href=\"https://github.com/ruarfff/leetcode-jan-2021\">this python repo</a>. There is also <a href=\"https://github.com/microsoft/vscode-remote-try-python\">a more detail official example</a>.</p>\n<p>If you don’t have access to Codespaces you can <a href=\"https://github.com/features/codespaces/signup\">request early access</a> - note that link may not age well.</p>\n<p>If you have access, you should see an option in the GitHub UI:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/718e66bd43001df484b552c78311c4d6/9c177/1-gh-repo-ui.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABMElEQVQY012Q227DMAiG+wBTbWMb8CF24jR20nTr4WY3k/b+bzVl2SZ1EkII+OCHQ8rVp4Zdpa5a7pQhsM6g19aB4T349UEoe1RWSCtejBT2gNaBRglWAYJhDj26TqO3HDU6pVkZBsMSEDlyyM5n7BN9TFC7wxFQAMpvU4B5qDGNLmSDfmd+Spqm+a2t9zKtaV7K553n8fBX3juGcW7na0wnbb3B4LvC26BgKdblOq/3/rT0ZRnywpyfYKmJQ28oCMBvtQ5dUsYpvT2i1Etbb+18S6V1paFLzzBgSCWXKjVJTcpwGibySQCCdUNdp+U6vz7S0FwsluMzrNB3ZTgtEkgCKc0hjZaiUBs8Xx6X23tbH2N77aeVfP6/2VLQ1u33K70p32OpyWDcrtAsgOSWpy/V7C9hzGyiXAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Repo UI\"\n        title=\"Repo UI\"\n        src=\"/static/718e66bd43001df484b552c78311c4d6/f058b/1-gh-repo-ui.png\"\n        srcset=\"/static/718e66bd43001df484b552c78311c4d6/c26ae/1-gh-repo-ui.png 158w,\n/static/718e66bd43001df484b552c78311c4d6/6bdcf/1-gh-repo-ui.png 315w,\n/static/718e66bd43001df484b552c78311c4d6/f058b/1-gh-repo-ui.png 630w,\n/static/718e66bd43001df484b552c78311c4d6/9c177/1-gh-repo-ui.png 880w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>If you have not setup this repo before, you will be asked to create a new Codespace. After that, you will have a link to the space like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 536px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/40acc1a59f43d511ac7e7410b65c46ba/2d920/2-gh-codespaces-button.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.08860759493672%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB70lEQVQoz42SXW/TMBSGezfE2vojdWwnduw4bpykS5N+LN2adR+oFBDwE7jhelzwAxB/HXUe2xBCQnp0pHOk9+gcve8AIAIQgTiEOASIjEAwHOMhwH4+HKERCCAk4HUwOkHDEwhfTSAKh2N0OkIDL3sEES7SvGyK2SKSJkrMrFlbV4dKsS+Nud8W367Z1xZS6or5rFk/i1FAIQ5ppMp6VS82UueJce1576oFy7L4/rz4sZ//fM+/d5CzRE1TWw5QQH/DTD6bry4yN+fSCJ0LnUcyi5WVOhcsi0ITUSOYhTgUyqZZOXj6FgZU22rWdrZoYjX14ieUrTxJVgAURiJVxg0mVHqCMM7Lpl33y2633Ozarm/X/aK7WnZX7bqXqUtMoW2lbQUQYbHisR5MqPDgCZ8vL272H/vbd7s3H+7eftreHLY3h7vD58vdfrW5LuqVtlXmaoAIjzUX+sXZmCamSEwhdO7P9q3H5GfaVjJ1MnUAh1zoSJqXPzOVlWW9Xm52XX93vr3NXP2gLFVWeplfdPT/b5+ZSLk0sbJCT4WeMmFonHoe5tNYWS4NQKQ8a9vV5bNVx30AD8f4dPTIMWrjwDOGBE0YJhw8nClVZl31Z8L+AUAkZCJJc2Uc5QlEJFJVki//S+zzhyfM12NLBKbqF0s+W5jHslo9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Codespaces Button\"\n        title=\"Codespaces Button\"\n        src=\"/static/40acc1a59f43d511ac7e7410b65c46ba/2d920/2-gh-codespaces-button.png\"\n        srcset=\"/static/40acc1a59f43d511ac7e7410b65c46ba/c26ae/2-gh-codespaces-button.png 158w,\n/static/40acc1a59f43d511ac7e7410b65c46ba/6bdcf/2-gh-codespaces-button.png 315w,\n/static/40acc1a59f43d511ac7e7410b65c46ba/2d920/2-gh-codespaces-button.png 536w\"\n        sizes=\"(max-width: 536px) 100vw, 536px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Then you basically have VSCode in the browser:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/96015875c211f3478324f1338065bb72/9c177/3-gh-codespaces-ui.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEElEQVQoz43Py26DMBCFYd4jXIzHnhlsjAMObsGBRFHVm9RF3/9lqjZNN72k0rc4m39xMucH3w+Kmq7rxhj80NvWS2wE4B+kYk0mQ+PTegw3C3Hn/KjZKTSgjdTNFYozIDvtl343o7XkgpBUSRTAtbouA2rjvPdhIjatG4wLpt1KNP+KFdm0HsZprVWj0GpuFb2XAuhH50ycY4km3ka2fogpxBTGqetH64Pmtlb8/aoiq8gCWQGUSW3ilMj283o63T/FeeV2KxRXEssP1UX5RegCKdeYITs/xAr4cHp4fnk93j12IVaARQW/KmHDlBNl1gfjhlzoXVpCWsj3YF2puQAsAHNNuaLPfVFIvWmaXNMbLs9Uegu4R2MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Codespaces UI\"\n        title=\"Codespaces UI\"\n        src=\"/static/96015875c211f3478324f1338065bb72/f058b/3-gh-codespaces-ui.png\"\n        srcset=\"/static/96015875c211f3478324f1338065bb72/c26ae/3-gh-codespaces-ui.png 158w,\n/static/96015875c211f3478324f1338065bb72/6bdcf/3-gh-codespaces-ui.png 315w,\n/static/96015875c211f3478324f1338065bb72/f058b/3-gh-codespaces-ui.png 630w,\n/static/96015875c211f3478324f1338065bb72/9c177/3-gh-codespaces-ui.png 880w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>You don’t need any extra setup for this to work. You will get a handy development environment that persists so you can open it up on any machine with a browser without needing to install any extra development tools. You can work on one machine and move to another no problem.</p>\n<p>What if you want to customise the setup? That’s where devcontainer comes in. For my example repo, I wanted to use python 3.8 and I wanted pipenv to be installed. This is how I set that up.</p>\n<h2>Docker Setup</h2>\n<p>You can define the environment you want to use for development with a dockerfile. My docker file it really basic but you can do whatever you need here:</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> python:3.8</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span>  pip install pipenv</span></code></pre></div>\n<p>I put this at the root of the project in a file called <code class=\"language-text\">Dockerfile</code>.</p>\n<p>For Codespaces to use this you need one more step.</p>\n<p>Create a file: <code class=\"language-text\">.devcontainer/devcontainer.json</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Docker Setup\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// Sets the run context to one level up instead of the .devcontainer folder so we can keep Dockerfile at the root.</span>\n  <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"..\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// Set *default* container specific settings.json values on container create.</span>\n  <span class=\"token property\">\"settings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"terminal.integrated.shell.linux\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"extensions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"postCreateCommand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pipenv sync --dev\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"runArgs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"--network\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"host\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I like having the Dockerfile at the root of my project so I configured it that way but it’s also quite common to put the Dockerfile in the <code class=\"language-text\">.devcontainers</code> directory.</p>\n<p><code class=\"language-text\">\"terminal.integrated.shell.linux\": null</code> just says we don’t want to use my local VSCode shell settings since your own VSCode settings get imported if you are using settings sync. You can configure this to be more specific based on what’s in your Dockerfile.</p>\n<p>I want to use <a href=\"https://pypi.org/project/pipenv/\">pipenv</a> so having this run post creation <code class=\"language-text\">\"postCreateCommand\": \"pipenv sync --dev\"</code> saves one extra step.</p>\n<p><code class=\"language-text\">\"runArgs\": [ \"--network\", \"host\"]</code> because I don’t want to bother messing with ports.</p>\n<p>With all that setup, once you create a new Codespace, you should see it getting created like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d2bb9f16abeb32e3fade1668e7129b87/9c177/4-gh-output.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEUlEQVQoz5WR3WrCQBCF97Ia22x2d/Z/s5smMUoMirYSayMWe9P3f6GSRouFFip8HObMMHCYQSBtmpWMG0x4QsVNIBBGGp9QESfwDSb8N859AgoTDtIiJozUXhovdNqrSoVOmTCMa8YH1WcrDOUaE05BjSd4/dQim+bzxXqxeq7qpQuFC6XzhTReGa9sUCb0agPjmoIioIZcowi3Lx3S7nE6a/JpnYYSpKWgrtA/LO87wA0IM57gbbtHPq822/1y02bFnEsHwlwy97Ep6Es9hO9Hw3K761BR1bvu1Ky22mb3Mb0+218kVIyi+PXwhspZc3z/mNUr+nXD/0CYvIviw/GEhHIuFCBu+DNh8gGzLK8+AQbcNA+tMNVpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Codespaces build output\"\n        title=\"Codespaces build output\"\n        src=\"/static/d2bb9f16abeb32e3fade1668e7129b87/f058b/4-gh-output.png\"\n        srcset=\"/static/d2bb9f16abeb32e3fade1668e7129b87/c26ae/4-gh-output.png 158w,\n/static/d2bb9f16abeb32e3fade1668e7129b87/6bdcf/4-gh-output.png 315w,\n/static/d2bb9f16abeb32e3fade1668e7129b87/f058b/4-gh-output.png 630w,\n/static/d2bb9f16abeb32e3fade1668e7129b87/9c177/4-gh-output.png 880w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Now you have an environment setup the way you want.</p>\n<p>This is a very basic example but there’s a lot more you can do.</p>\n<h2>More Customisation</h2>\n<p>You will almost certainly want to look at <a href=\"https://docs.github.com/en/github/developing-online-with-codespaces/personalizing-codespaces-for-your-account\">setting up GitHub dotfiles</a> to customise the shell in Codespaces.</p>\n<p>Checkout the many examples in the <a href=\"https://github.com/microsoft/vscode-dev-containers/tree/master/containers\">vscode-dev-containers repo</a>.</p>","frontmatter":{"title":"Using Devcontainer With GitHub Codespaces","date":"January 16, 2021","description":"The best tech resources I discovered in the second half of 2020"}},"previous":{"fields":{"slug":"/team-secrets/"},"frontmatter":{"title":"Managing local app secrets and sharing secrets with your team"}},"next":{"fields":{"slug":"/slack-sentiment/"},"frontmatter":{"title":"Check the Mood of a Slack Channel using Machine Learning"}}},"pageContext":{"id":"27bb0dd0-f3e5-5af0-80a2-4e2b2568e5a5","previousPostId":"08123e60-f164-5c3a-bdaa-13b0678bfb29","nextPostId":"136f235b-8c30-5131-b91c-b26857b67c25"}},"staticQueryHashes":["2841359383","916993862"]}