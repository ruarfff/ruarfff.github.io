<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.331c385503a9a8984a99.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}


/*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}hr{color:inherit}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}table{text-indent:0;border-color:inherit}[type=button],button{-webkit-appearance:button}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{border:0 solid #e5e7eb}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af}input::placeholder,textarea::placeholder{color:#9ca3af}button{cursor:pointer}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.flex{display:flex}.table{display:table}.fixed{position:fixed}*{--tw-shadow:0 0 transparent;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:Montserrat,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:"Merriweather","Georgia",Cambria,"Times New Roman",Times,serif;--font-body:var(--fontFamily-serif);--font-heading:var(--fontFamily-sans);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#005b99;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5}*,:after,:before{box-sizing:border-box}html{line-height:var(--lineHeight-normal);font-size:var(--fontSize-root);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{font-family:var(--font-body);font-size:var(--fontSize-1);color:var(--color-text)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);height:1px;border:0}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);margin-top:var(--spacing-12);margin-bottom:var(--spacing-6);line-height:var(--lineHeight-tight);letter-spacing:-.025em}h2,h3,h4,h5,h6{font-weight:var(--fontWeight-bold);color:var(--color-heading)}h1{font-weight:var(--fontWeight-black);font-size:var(--fontSize-6);color:var(--color-heading-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{line-height:var(--lineHeight-relaxed);--baseline-multiplier:0.179;--x-height-multiplier:0.35;margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{margin-left:var(--spacing-0);margin-right:var(--spacing-0);margin-bottom:var(--spacing-8);list-style-position:outside;list-style-image:none}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{color:var(--color-text-light);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6);border-left:var(--spacing-1) solid var(--color-primary);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{width:100%;margin-bottom:var(--spacing-8);border-collapse:collapse;border-spacing:.25rem}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:var(--spacing-0) auto;max-width:var(--maxWidth-wrapper);padding:var(--spacing-10) var(--spacing-5)}.global-wrapper[data-is-root-path=true] .bio{margin-bottom:var(--spacing-20)}.global-header{margin-bottom:var(--spacing-12)}.main-heading{font-size:var(--fontSize-7);margin:0}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{font-size:var(--fontSize-4);color:var(--color-primary);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-weight:var(--fontWeight-bold);font-family:var(--font-heading);text-decoration:none;font-size:var(--fontSize-2)}.bio{display:flex;margin-bottom:var(--spacing-16)}.bio-avatar,.bio p{margin-bottom:var(--spacing-0)}.bio-avatar{margin-right:var(--spacing-4);min-width:50px;border-radius:100%}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-size:var(--fontSize-2);font-family:var(--font-heading)}.blog-post-nav ul{margin:var(--spacing-0)}.gatsby-highlight{margin-bottom:var(--spacing-8)}@media (max-width:42rem){blockquote{padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4);margin-left:var(--spacing-0)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.29.2"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=3d2daffdda02655a99f9d2ded68aec1f" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=3d2daffdda02655a99f9d2ded68aec1f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=3d2daffdda02655a99f9d2ded68aec1f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=3d2daffdda02655a99f9d2ded68aec1f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=3d2daffdda02655a99f9d2ded68aec1f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=3d2daffdda02655a99f9d2ded68aec1f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=3d2daffdda02655a99f9d2ded68aec1f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=3d2daffdda02655a99f9d2ded68aec1f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=3d2daffdda02655a99f9d2ded68aec1f"/><title data-react-helmet="true">Understanding python async | Ruairí&#x27;s Blog</title><meta data-react-helmet="true" name="description" content="Async python with asyncio"/><meta data-react-helmet="true" property="og:title" content="Understanding python async"/><meta data-react-helmet="true" property="og:description" content="Async python with asyncio"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="ruarfff"/><meta data-react-helmet="true" name="twitter:title" content="Understanding python async"/><meta data-react-helmet="true" name="twitter:description" content="Async python with asyncio"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-9b92d13457d62c145927.js"/><link as="script" rel="preload" href="/styles-b2c881b0cfd52c108c7e.js"/><link as="script" rel="preload" href="/framework-49d97c1e631f53564352.js"/><link as="script" rel="preload" href="/app-e4da6d6e938b0a2ecb0d.js"/><link as="script" rel="preload" href="/commons-5f23276ad1b05dd54b97.js"/><link as="script" rel="preload" href="/cd7d5f864fc9e15ed8adef086269b0aeff617554-4cc9e0169a565edb040a.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-7b7b7883f1acbaa2bd9b.js"/><link as="fetch" rel="preload" href="/page-data/understanding-python-async/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/916993862.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a class="header-link-home" href="/">Ruairí&#x27;s Blog</a></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">Understanding python async</h1><p>August 26, 2022</p></header><section itemProp="articleBody"><p>Writing asynchronous code in python is quite powerful and can perform pretty well if you use something like <a href="https://uvloop.readthedocs.io/">uvloop</a>:</p>
<blockquote>
<p>uvloop makes asyncio fast. In fact, it is at least 2x faster than nodejs, gevent, as well as any other Python asynchronous framework. The performance of uvloop-based asyncio is close to that of Go programs.</p>
</blockquote>
<p>Writing asynchronous code in python is also pretty easy to mess up.</p>
<p>This post is an attempt to understand async python a little better and make it easier to spot the common mistakes.</p>
<p>There’s a repo if you’d like to have the code examples: <a href="https://github.com/ruarfff/understanding-python-async">https://github.com/ruarfff/understanding-python-async</a></p>
<p>In this post we will look at:</p>
<ul>
<li>async/concurrent vs parallel</li>
<li>interesting things to know about async in python</li>
<li>async with FastAPI</li>
<li>what do do if something you use doesn’t support async</li>
</ul>
<h2>Coding along</h2>
<p>Make sure to have python >= 3.8 installed.</p>
<p>You should be using a unix like shell e.g. Linux, Mac, WSL.</p>
<p>My setup (you don’t need to use this exact version):</p>
<ul>
<li><a href="https://github.com/pyenv/pyenv">pyenv</a></li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">pyenv install 3.10.6

pyenv global 3.10.6</code></pre></div>
<ul>
<li><code class="language-text">git clone git@github.com:zoe/understanding-python-async.git &amp;&amp; cd understanding-python-async</code></li>
<li>Setup a <a href="https://docs.python.org/3/library/venv.html">virtual environment</a> and run all commands in this context</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">python -m venv ./.venv

source .venv/bin/activate</code></pre></div>
<ul>
<li>Install requirements <code class="language-text">pip install -r requirements.txt</code></li>
<li>You should also have <a href="https://curl.se/">curl</a> installed</li>
</ul>
<h2>Async Vs Parallel</h2>
<p>Parallel and asynchronous are not the same thing. If you have a good mental model for async vs parallel feel free to skip this section.</p>
<p>When I was in college I wrote a mobile game. I had to learn about <a href="https://gameprogrammingpatterns.com/game-loop.html">the game loop</a>.</p>
<p>Within the loop, I had code to:</p>
<ul>
<li>process inputs</li>
<li>update the game state based on reactions to inputs and existing algorithms</li>
<li>render the game</li>
</ul>
<p>It was all perfectly synchronous so I couldn’t have anything take too long or the game would become unplayable. I became obsessed with improving performance but I always hit limits. I was attempting to render at 30FPS (frames per second meaning the loop must carry out all processing at least 30 times per second). Every time I coded up a new game agent or increased the number of agents on the screen, the FPS would suffer and I’d go mad trying to figure out how to optimise performance again. Then one day, I discovered the joy and pain of async programming.</p>
<p>Mobile games ran on a single processor but using threading, you could simulate parallelism. It was, in fact, asynchronous but you didn’t really have to think too hard about scheduling the threads. You hand that job over to the operating system. It did make things a lot more complicated and harder to understand though and that’s the major tradeoff.</p>
<p>This might be fairly inaccurate but I like to think of asyncio (and its Cython-based friend uvloop) as a sort of game loop. It’s not running in parallel but the loop will keep looping if you don’t block it. If you do block it, you mess the whole thing up.</p>
<p>Where that mental model breaks down is when we think about CPU bound VS IO-bound.</p>
<p>Asynchronous code makes sense when there’s a lot of waiting or the code is IO-Bound. It’s somewhat more intuitive. Like when you are coding. Consider an example flow:</p>
<h4>Task - get some code to production</h4>
<ul>
<li>you write some code</li>
<li>run and test the code</li>
<li>commit and push the code</li>
<li>watch the build pipeline</li>
<li>get distracted and start chatting on slack/teams</li>
<li>go for lunch</li>
<li>remember you had a build pipeline running</li>
<li>test the deployment</li>
<li>done</li>
</ul>
<p>There are steps you don’t wait for e.g. watching the build pipeline. This is asynchronous and frees you up to do other things. It’s not necessarily more efficient but it’s better than sitting there waiting for the build pipeline to finish. You got other tasks done while also getting the code to production.</p>
<p>A build pipeline has steps that can be run in <strong>parallel</strong> e.g. testing and linting. This can be done in parallel if we give each step all its own resources and a dedicated machine. We could do all the steps <strong>asynchronously</strong> on one large machine but we can use many smaller, cheaper machines to do the work in parallel.</p>
<p>You can think of async as one resource doing many things at once and figuring out how not to wait for each thing to be finished. Parallel processing is multiple resources each working on separate tasks or parts of a task.</p>
<p>Throughout the rest of this post, we will be focusing on the asynchronous model. When writing python apps with a framework like FastAPI, we are generally doing IO-Bound work e.g. downstream requests, reading databases, files etc. The asynchronous model is most useful in this case.</p>
<p>We will focus primarily on the patterns for using <a href="https://docs.python.org/3/library/asyncio-task.html">coroutines</a> and async/await.</p>
<h2>Example of async code using asyncio</h2>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> asyncio
<span class="token keyword">import</span> datetime
<span class="token keyword">import</span> time

<span class="token keyword">from</span> colorama <span class="token keyword">import</span> init
<span class="token keyword">from</span> colorama <span class="token keyword">import</span> Fore<span class="token punctuation">,</span> Back<span class="token punctuation">,</span> Style


<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>Back<span class="token punctuation">.</span>GREEN <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string">"Starting synchronous work."</span><span class="token punctuation">,</span> flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>

    synchronous_work<span class="token punctuation">(</span><span class="token punctuation">)</span>
    synchronous_work<span class="token punctuation">(</span><span class="token punctuation">)</span>

    end_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time

    <span class="token keyword">print</span><span class="token punctuation">(</span>
        Back<span class="token punctuation">.</span>GREEN
        <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE
        <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Ending synchronous work. Total time: </span><span class="token interpolation"><span class="token punctuation">{</span>end_time<span class="token punctuation">.</span>total_seconds<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec"> .2</span><span class="token punctuation">}</span></span><span class="token string"> sec."</span></span><span class="token punctuation">,</span>
        flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>Back<span class="token punctuation">.</span>MAGENTA <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string">"Starting awaiting async functions."</span><span class="token punctuation">,</span> flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">await</span> async_work<span class="token punctuation">(</span>Back<span class="token punctuation">.</span>LIGHTYELLOW_EX <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span>
    <span class="token keyword">await</span> async_work<span class="token punctuation">(</span>Back<span class="token punctuation">.</span>LIGHTRED_EX <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span>

    end_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time

    <span class="token keyword">print</span><span class="token punctuation">(</span>
        Back<span class="token punctuation">.</span>MAGENTA
        <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE
        <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Ending awaiting async functions. Total time: </span><span class="token interpolation"><span class="token punctuation">{</span>end_time<span class="token punctuation">.</span>total_seconds<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec"> .2</span><span class="token punctuation">}</span></span><span class="token string"> sec."</span></span><span class="token punctuation">,</span>
        flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>Back<span class="token punctuation">.</span>LIGHTBLUE_EX <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string">"Starting running async."</span><span class="token punctuation">,</span> flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>

    tasks <span class="token operator">=</span> <span class="token punctuation">[</span>
        async_work<span class="token punctuation">(</span>Back<span class="token punctuation">.</span>LIGHTYELLOW_EX <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">,</span>
        async_work<span class="token punctuation">(</span>Back<span class="token punctuation">.</span>LIGHTRED_EX <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>gather<span class="token punctuation">(</span><span class="token operator">*</span>tasks<span class="token punctuation">)</span>

    end_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time

    <span class="token keyword">print</span><span class="token punctuation">(</span>
        Back<span class="token punctuation">.</span>LIGHTBLUE_EX
        <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE
        <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Ending running async. Total time: </span><span class="token interpolation"><span class="token punctuation">{</span>end_time<span class="token punctuation">.</span>total_seconds<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token format-spec"> .2</span><span class="token punctuation">}</span></span><span class="token string"> sec."</span></span><span class="token punctuation">,</span>
        flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>Style<span class="token punctuation">.</span>RESET_ALL<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">synchronous_work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>Back<span class="token punctuation">.</span>CYAN <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string">"Pretending to wait."</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>


<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">async_work</span><span class="token punctuation">(</span>colour<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> Fore<span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>colour <span class="token operator">+</span> <span class="token string">"Pretending to wait async."</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    init<span class="token punctuation">(</span><span class="token punctuation">)</span>
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>This contrived example shows a simple case where asynchronous code got things done faster than blocking code.</p>
<p>Running 2 tasks that each take 2 seconds asynchronously allows them to be finished in 2 seconds.</p>
<p>If you await 2 async functions in sequence, it’s sort of like it was done synchronously so if you really want multiple steps to run asynchronously you can use utilities such as the <code class="language-text">asyncio.gather</code> function in that example.</p>
<h2>It’s Async all the way down</h2>
<p>An important note that took me a few mistakes to understand, you must use async all the way down. If you block at any point within an async function, you block everything.</p>
<p>We will explore this more in the FastAPI section but for now, it’s important to be aware that this:</p>
<div class="gatsby-highlight" data-language="pthon"><pre class="language-pthon"><code class="language-pthon">async def synchronous_work_in_async_function():
    time.sleep(2)</code></pre></div>
<p>Has very different effects to this:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">async_work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre></div>
<h2>The GIL</h2>
<p>The <a href="https://wiki.python.org/moin/GlobalInterpreterLock">python GIL</a> (global interpreter lock) can lead to some issues when writing async code. For the most part, you’ll probably never notice if you’re writing IO-bound apps but for CPU bound, it may become an issue.</p>
<blockquote>
<p>The GIL prevents race conditions and ensures thread safety.</p>
</blockquote>
<p>All threads in python share the same memory space. The GIL helps ensure thread safety for multiple threads interacting with the same variable.</p>
<p>An example of where this might be important. Python uses a ref count to determine if something should be garbage collected.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> sys


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a_thing <span class="token operator">=</span> <span class="token string">"a thing"</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>getrefcount<span class="token punctuation">(</span>a_thing<span class="token punctuation">)</span><span class="token punctuation">)</span>
    another_thing <span class="token operator">=</span> a_thing
    <span class="token keyword">print</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>getrefcount<span class="token punctuation">(</span>another_thing<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">del</span> a_thing
    <span class="token keyword">print</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>getrefcount<span class="token punctuation">(</span>another_thing<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>If multiple threads are updating references, you might get an accidental garbage collection or a memory leak. The lock is there to ensure this doesn’t happen and garbage collection is done safely.</p>
<p>The downside is this can affect performance.</p>
<blockquote>
<p>In hindsight, the GIL is not ideal, since it prevents multithreaded CPython programs from taking full advantage of multiprocessor systems in certain situations.</p>
</blockquote>
<p>There are ways around this. Some libraries aren’t effected by the GIL e.g. <a href="https://numpy.org/">Numpy.</a>.</p>
<p>When writing a web app with FastAPI, using async/await and a library like <a href="https://www.uvicorn.org/">uvicorn</a>, the GIL is less of an issue as we are primarily IO bound.</p>
<h2>Async FastAPI</h2>
<p>FastAPI is <a href="https://fastapi.tiangolo.com/?h=perfor#performance">quite fast</a>, unless you make it not fast :)</p>
<p>How does that happen?</p>
<p>The <a href="https://fastapi.tiangolo.com/async/">async docs for FastAPI</a> are really good. We won’t repeat much from them here but instead look at some examples.</p>
<p>A “hello world” FastAPI app looks like this:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> fastapi <span class="token keyword">import</span> FastAPI

app <span class="token operator">=</span> FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Hello World"</span><span class="token punctuation">}</span></code></pre></div>
<p>When we start up our FastAPI service, it will handle requests asynchronously on the eventloop. One worker should be able to handle many requests in this scenario.</p>
<p>Let’s see what that looks like. If you have the <a href="https://github.com/zoe/understanding-python-async">examples repo</a> you can run ./test-endpoints.sh to see all these outputs or feel free to follow along step by step here.</p>
<p>Create a hello world sample like the following:</p>
<p><code class="language-text">touch src/fastapi_example.py</code></p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> fastapi <span class="token keyword">import</span> FastAPI
<span class="token keyword">import</span> time
<span class="token keyword">import</span> datetime
<span class="token keyword">import</span> asyncio

<span class="token keyword">from</span> colorama <span class="token keyword">import</span> init
<span class="token keyword">from</span> colorama <span class="token keyword">import</span> Fore<span class="token punctuation">,</span> Back<span class="token punctuation">,</span> Style

app <span class="token operator">=</span> FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>
        Back<span class="token punctuation">.</span>GREEN <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Hello world started at: </span><span class="token interpolation"><span class="token punctuation">{</span>start_time<span class="token punctuation">}</span></span><span class="token string"> sec."</span></span><span class="token punctuation">,</span>
        flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Hello World"</span><span class="token punctuation">}</span></code></pre></div>
<p>We can hit the same endpoint multiple times simultaneously with curl.</p>
<p>Create a text file like this:</p>
<p><code class="language-text">touch test_urls.txt</code></p>
<p>Add this content:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"</code></pre></div>
<p>Start your FastAPI app:</p>
<p><code class="language-text">uvicorn src.fastapi_example:app --reload</code></p>
<p>In another console, run curl:</p>
<p><code class="language-text">curl --parallel --parallel-immediate --parallel-max 4 --config test_urls.txt</code></p>
<p>You should see output similar to the following:</p>
<p>That was perhaps too fast to prove anything.</p>
<p>Update your endpoint with <code class="language-text">await asyncio.sleep(4)</code>:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>
        Back<span class="token punctuation">.</span>GREEN <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Hello world started at: </span><span class="token interpolation"><span class="token punctuation">{</span>start_time<span class="token punctuation">}</span></span><span class="token string"> sec."</span></span><span class="token punctuation">,</span>
        flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Hello World"</span><span class="token punctuation">}</span></code></pre></div>
<p>Run the test again:</p>
<p>Despite each call not responding for 4 seconds, they all kicked off at the same time. FastAPI is handling requests asynchronously.</p>
<p>Now to demonstrate where things can go wrong, let’s add another endpoint:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/slow"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">slow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>
        Back<span class="token punctuation">.</span>GREEN <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Slow started at: </span><span class="token interpolation"><span class="token punctuation">{</span>start_time<span class="token punctuation">}</span></span><span class="token string"> sec."</span></span><span class="token punctuation">,</span>
        flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"So slow"</span><span class="token punctuation">}</span></code></pre></div>
<p>Here’s we’re using the blocking <code class="language-text">time.sleep</code> instead of the non blocking <code class="language-text">asyncio.sleep</code>.</p>
<p>Update the urls.txt file:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">url = "http://127.0.0.1:8000/slow"
url = "http://127.0.0.1:8000/slow"
url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"</code></pre></div>
<p>The order is important. We want the slow ones to kick off first.</p>
<p>Update the curl command to allow 6 concurrent requests:</p>
<p><code class="language-text">curl --parallel --parallel-immediate --parallel-max 6 --config test_urls.txt</code></p>
<p>Oops! We just blocked all requests from being processed.</p>
<p>The main takeaway from this is, you just can’t mix asynchronous and synchronous functionality in a FastAPI application this way.</p>
<p>Consider this next example:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>get</span><span class="token punctuation">(</span><span class="token string">"/sync-slow"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">sync_slow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>
        Back<span class="token punctuation">.</span>LIGHTRED_EX <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Sync slow started at: </span><span class="token interpolation"><span class="token punctuation">{</span>start_time<span class="token punctuation">}</span></span><span class="token string"> sec."</span></span><span class="token punctuation">,</span>
        flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"So slow"</span><span class="token punctuation">}</span></code></pre></div>
<p>Notice, we are not specifying <code class="language-text">async</code> on the function definition.</p>
<p>Update our test URLs:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">url = "http://127.0.0.1:8000/sync-slow"
url = "http://127.0.0.1:8000/sync-slow"
url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"
url = "http://127.0.0.1:8000/"</code></pre></div>
<p>If you don’t specify your endpoint as being async i.e. as <a href="https://docs.python.org/3/library/asyncio-task.html">a coroutine</a>, FastAPI will look after it for you instead as it will assume this route contains blocking calls whereas if you specify <code class="language-text">async</code>, it’s up to you to make sure it really is asynchronous.</p>
<p>Rules of thumb:</p>
<ul>
<li>if all your code uses coroutines i.e. all use async/await, use async when defining your route</li>
<li>if any of your code is blocking e.g. using requests, some non aio ORM etc. do not use async when specifying the route</li>
</ul>
<p>If you use <a href="https://docs.python-requests.org/en/latest/">requests</a> or standard <a href="https://www.sqlalchemy.org/">SQLAlchemy</a> anywhere in a route, you will block the execution.</p>
<p>Consider alternatives like:</p>
<ul>
<li><a href="https://docs.aiohttp.org/en/stable/">https://docs.aiohttp.org/en/stable/</a></li>
<li><a href="https://docs.sqlalchemy.org/en/14/orm/extensions/asyncio.html">https://docs.sqlalchemy.org/en/14/orm/extensions/asyncio.html</a></li>
</ul>
<h2>Pubsub</h2>
<p>FastAPI is great at managing async within the context of the framework e.g. in a route. It cannot account for any code you write that may be running on some schedule or handling incoming events. Especially if you’re using the same event loop.</p>
<p>To illustrate, let’s add some pubsub:</p>
<p><code class="language-text">pip install --upgrade google-cloud-pubsub</code></p>
<p>This example is pretty contrived and GCP specific but does demonstrate a common mistake.</p>
<p>If you’d like to follow along please <a href="https://cloud.google.com/sdk/docs/install">install the gcloud cli</a> and run the following to start a pubsub emulator:</p>
<p><code class="language-text">gcloud beta emulators pubsub start --project=example-project</code></p>
<p>We are doing this so we can see what happens when our FastAPI application listens to messages out side of standard web requests.</p>
<p>Update our FastAPI app to handle messages:</p>
<p>Import the pubsub lib:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> google<span class="token punctuation">.</span>cloud <span class="token keyword">import</span> pubsub_v1</code></pre></div>
<p>Setup a subscription:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">create_standard_subscription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    project_id <span class="token operator">=</span> <span class="token string">"example-project"</span>
    topic_id <span class="token operator">=</span> <span class="token string">"testing"</span>
    subscription_id <span class="token operator">=</span> <span class="token string">"testing-subscription"</span>

    publisher <span class="token operator">=</span> pubsub_v1<span class="token punctuation">.</span>PublisherClient<span class="token punctuation">(</span><span class="token punctuation">)</span>

    subscriber <span class="token operator">=</span> pubsub_v1<span class="token punctuation">.</span>SubscriberClient<span class="token punctuation">(</span><span class="token punctuation">)</span>
    subscription_path <span class="token operator">=</span> subscriber<span class="token punctuation">.</span>subscription_path<span class="token punctuation">(</span>project_id<span class="token punctuation">,</span> subscription_id<span class="token punctuation">)</span>
    topic_path <span class="token operator">=</span> publisher<span class="token punctuation">.</span>topic_path<span class="token punctuation">(</span>project_id<span class="token punctuation">,</span> topic_id<span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        subscriber<span class="token punctuation">.</span>create_subscription<span class="token punctuation">(</span>
            request<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token punctuation">:</span> subscription_path<span class="token punctuation">,</span> <span class="token string">"topic"</span><span class="token punctuation">:</span> topic_path<span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Subscription already exists"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> pubsub_v1<span class="token punctuation">.</span>subscriber<span class="token punctuation">.</span>message<span class="token punctuation">.</span>Message<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> message<span class="token punctuation">.</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"non-blocking"</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>
                Back<span class="token punctuation">.</span>BLUE <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Starting async message at: </span><span class="token interpolation"><span class="token punctuation">{</span>start_time<span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">,</span>
                flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span>
            message<span class="token punctuation">.</span>ack<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> message<span class="token punctuation">.</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"blocking"</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>
                Back<span class="token punctuation">.</span>LIGHTMAGENTA_EX
                <span class="token operator">+</span> Fore<span class="token punctuation">.</span>WHITE
                <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"Starting sync message at: </span><span class="token interpolation"><span class="token punctuation">{</span>start_time<span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">,</span>
                flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
            message<span class="token punctuation">.</span>ack<span class="token punctuation">(</span><span class="token punctuation">)</span>

    subscriber<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span>subscription_path<span class="token punctuation">,</span> callback<span class="token operator">=</span>callback<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Listening for messages on </span><span class="token interpolation"><span class="token punctuation">{</span>subscription_path<span class="token punctuation">}</span></span><span class="token string">..\n"</span></span><span class="token punctuation">)</span>


<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>on_event</span><span class="token punctuation">(</span><span class="token string">"startup"</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">startup_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    create_standard_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>Configure a pubsub client to send messages e.g.</p>
<p><code class="language-text">touch src/pubsub_client.py</code></p>
<p>With the following content:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> google<span class="token punctuation">.</span>cloud <span class="token keyword">import</span> pubsub_v1 <span class="token keyword">as</span> pubsub
<span class="token keyword">import</span> itertools


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    publisher <span class="token operator">=</span> pubsub<span class="token punctuation">.</span>PublisherClient<span class="token punctuation">(</span><span class="token punctuation">)</span>

    project_id <span class="token operator">=</span> <span class="token string">"example-project"</span>
    topic_id <span class="token operator">=</span> <span class="token string">"testing"</span>

    publisher <span class="token operator">=</span> pubsub<span class="token punctuation">.</span>PublisherClient<span class="token punctuation">(</span><span class="token punctuation">)</span>
    topic_path <span class="token operator">=</span> publisher<span class="token punctuation">.</span>topic_path<span class="token punctuation">(</span>project_id<span class="token punctuation">,</span> topic_id<span class="token punctuation">)</span>

    <span class="token keyword">try</span><span class="token punctuation">:</span>
        topic <span class="token operator">=</span> publisher<span class="token punctuation">.</span>create_topic<span class="token punctuation">(</span>request<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token punctuation">:</span> topic_path<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Created topic: </span><span class="token interpolation"><span class="token punctuation">{</span>topic<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Topic already exists"</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Run 5 non-blocking"</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> itertools<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        future <span class="token operator">=</span> publisher<span class="token punctuation">.</span>publish<span class="token punctuation">(</span>topic_path<span class="token punctuation">,</span> <span class="token string">b"non-blocking"</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>future<span class="token punctuation">.</span>result<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Run 5 blocking"</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> itertools<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        future <span class="token operator">=</span> publisher<span class="token punctuation">.</span>publish<span class="token punctuation">(</span>topic_path<span class="token punctuation">,</span> <span class="token string">b"blocking"</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>future<span class="token punctuation">.</span>result<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>We are going to send some messages to our app and see how it responds in different scenarios. The client uses environment variables to connect to the emulator. You must load the environment variables like so:</p>
<p><code class="language-text">$(gcloud beta emulators pubsub env-init)</code></p>
<p>So at this point you should have:</p>
<ul>
<li>a running pubsub emulator</li>
<li>a sample client with the emulator environment variables ready to go in the shell</li>
</ul>
<p>Run the client:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">❯ python src/pubsub_client.py
Topic already exists
Run 5 non-blocking
183
184
185
186
187
Run 5 blocking
188
189
190
191
192</code></pre></div>
<p>You should see output int he app console like this:</p>
<p>All the messages were processed asynchronously. The pubsub is using a callback and the eventloop used by FastAPI is not effected.</p>
<h2>Useful links</h2>
<ul>
<li><a href="https://docs.aiohttp.org/en/stable/">https://docs.aiohttp.org/en/stable/</a></li>
<li><a href="https://docs.sqlalchemy.org/en/14/orm/extensions/asyncio.html">https://docs.sqlalchemy.org/en/14/orm/extensions/asyncio.html</a></li>
<li><a href="https://github.com/alex-sherman/unsync">https://github.com/alex-sherman/unsync</a></li>
<li><a href="https://asherman.io/projects/unsync.html">https://asherman.io/projects/unsync.html</a></li>
<li><a href="https://fastapi.tiangolo.com/async/">https://fastapi.tiangolo.com/async/</a></li>
<li><a href="https://github.com/mikeckennedy/async-await-jetbrains-webcast">https://github.com/mikeckennedy/async-await-jetbrains-webcast</a></li>
<li><a href="https://stackoverflow.com/questions/61316540/how-to-get-python-fastapi-async-await-functionality-to-work-properly">https://stackoverflow.com/questions/61316540/how-to-get-python-fastapi-async-await-functionality-to-work-properly</a></li>
<li><a href="https://asgi.readthedocs.io/en/latest/">https://asgi.readthedocs.io/en/latest/</a></li>
<li><a href="https://uvloop.readthedocs.io/">https://uvloop.readthedocs.io/</a></li>
<li><a href="https://www.uvicorn.org/">https://www.uvicorn.org/</a></li>
<li><a href="https://stackoverflow.com/questions/41063331/how-to-use-asyncio-with-existing-blocking-library">https://stackoverflow.com/questions/41063331/how-to-use-asyncio-with-existing-blocking-library</a></li>
</ul></section><hr/><footer><div class="bio"><div class="bio-avatar gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQCBf/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAG+S6MuppRysEXRFP8A/8QAGRAAAwEBAQAAAAAAAAAAAAAAAQIDABEi/9oACAEBAAEFAn6B2s25mz+n0aPSlyRpMXn/AP/EABcRAQEBAQAAAAAAAAAAAAAAAAEQITH/2gAIAQMBAT8BDIcn/8QAFhEBAQEAAAAAAAAAAAAAAAAAEAEx/9oACAECAQE/AS6f/8QAHxAAAQIGAwAAAAAAAAAAAAAAAQACEBESISIxI0Fh/9oACAEBAAY/Asdlcki3yE0G3hkelUDdBx2v/8QAGhABAAIDAQAAAAAAAAAAAAAAAQARITFBgf/aAAgBAQABPyFECcr0Sos7dKSMUKo+QZTiO44vQsHJnwcM3ujNT//aAAwDAQACAAMAAAAQ8NfD/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREg/9oACAEDAQE/EAacP//EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPxBW4P/EABsQAQADAQEBAQAAAAAAAAAAAAEAESFBYYGR/9oACAEBAAE/EGCUpfYsL15S0Pa6TSWGRLDrZwkRu+q/kpCiqwYGzaIyBKUZXuSoziKJ/9k=" alt="Ruairí O&#x27;Brien" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/static/8c0daa5d2f857b531fed1e4dba23ef9c/340ed/profile-pic.jpg 1x,
/static/8c0daa5d2f857b531fed1e4dba23ef9c/32ce1/profile-pic.jpg 1.5x,
/static/8c0daa5d2f857b531fed1e4dba23ef9c/04d41/profile-pic.jpg 2x" /><img loading="lazy" width="50" height="50" srcset="/static/8c0daa5d2f857b531fed1e4dba23ef9c/340ed/profile-pic.jpg 1x,
/static/8c0daa5d2f857b531fed1e4dba23ef9c/32ce1/profile-pic.jpg 1.5x,
/static/8c0daa5d2f857b531fed1e4dba23ef9c/04d41/profile-pic.jpg 2x" src="/static/8c0daa5d2f857b531fed1e4dba23ef9c/340ed/profile-pic.jpg" alt="Ruairí O'Brien" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Written by <strong>Ruairí O&#x27;Brien</strong> <!-- -->who wants to be good.<!-- --> <a href="https://twitter.com/ruarfff">You can follow me on Twitter</a></p></div></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/circleci-pr-only/">← <!-- -->How to only run a job on a pull request in CircleCI</a></li><li></li></ul></nav></main><footer>© <!-- -->2022<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.com">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-J8S0YBL54N"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-J8S0YBL54N', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/understanding-python-async/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-826594aefaaaff36c77f.js"],"app":["/app-e4da6d6e938b0a2ecb0d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-d6ac343b87d4eab91857.js"],"component---src-pages-index-js":["/component---src-pages-index-js-5cfa14d571120eaba4a0.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-721769c673f5261ba83c.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-7b7b7883f1acbaa2bd9b.js"]};/*]]>*/</script><script src="/polyfill-826594aefaaaff36c77f.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-7b7b7883f1acbaa2bd9b.js" async=""></script><script src="/cd7d5f864fc9e15ed8adef086269b0aeff617554-4cc9e0169a565edb040a.js" async=""></script><script src="/commons-5f23276ad1b05dd54b97.js" async=""></script><script src="/app-e4da6d6e938b0a2ecb0d.js" async=""></script><script src="/framework-49d97c1e631f53564352.js" async=""></script><script src="/styles-b2c881b0cfd52c108c7e.js" async=""></script><script src="/webpack-runtime-9b92d13457d62c145927.js" async=""></script></body></html>